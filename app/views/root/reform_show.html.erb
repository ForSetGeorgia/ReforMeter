<%
page_title t('.title', name: @reform.name, time: @quarter.time_period)
@do_not_use_default_page_layout = true
%>

<div class='contentSection mod-overlap-top-image'>

  <header class='contentSection-header'>

    <h1 class='heading'>
      <%= yield(:page_title) %>
    </h1>

    <div>

      <% if @active_reforms %>

        <%= t('shared.common.change_reform') %>:

        <select class='js-become-select2 js-reform-page-reform-select'>

          <% @active_reforms.each do |active_reform| %>
            <option value='<%= active_reform[1] %>' <% if @reform.slug == active_reform[1] %>selected<% end %>>
              <%= active_reform[0] %>
            </option>
          <% end %>

        </select>

      <% end %>

      <% if @active_quarters %>

        <%= t('shared.common.change_time') %>:

        <select class='js-become-select2 js-reform-page-quarter-select'>

          <% @active_quarters.each do |active_quarter| %>
            <option value='<%= active_quarter[1] %>' <% if @quarter.slug == active_quarter[1] %>selected<% end %>>
              <%= active_quarter[0] %>
            </option>
          <% end %>

        </select>

      <% end %>

      <% if @active_reforms.present? || @active_quarters.present? %>
        <button style='border: 1px solid' class='js-load-new-reform-page' data-new-url-base='<%= reforms_path %>'>
          <%= t('shared.actions.load') %>
        </button>
      <% end %>

    </div>

  </header>

  <div class='contentSection-body'>

    <div style="color: #fff; background-color: rgb(<%= "#{@reform.color.r}, #{@reform.color.g}, #{@reform.color.b}" %>">temporary - just showing color</div>

    <% if @reform_survey.summary %>
      <div>
        <%= simple_format_no_tags(@reform_survey.summary) %>
      </div>
    <% end %>

    <section>

      <h2 class='heading mod-vertical-margin'>
        <%= t('.header.government_summary') %>
      </h2>

      <% if @reform_survey.government_summary %>
        <div>
          <%= simple_format_no_tags(@reform_survey.government_summary) %>
        </div>
      <% end %>

      <div class="js-become-highchart gauge mod-white-border" data-chart-type='big-solid-gauge' data-id='reform-government-overall' style="width: 300px; height: 250px;"></div>

      <div class="js-become-highchart gauge mod-white-border" data-chart-type='small-solid-gauge' data-id='reform-government-institutional-setup' style="width: 300px; height: 250px;"></div>

      <div class="js-become-highchart gauge mod-white-border" data-chart-type='small-solid-gauge' data-id='reform-government-capacity-building' style="width: 300px; height: 250px;"></div>

      <div class="js-become-highchart gauge mod-white-border" data-chart-type='small-solid-gauge' data-id='reform-government-infrastructure-budgeting' style="width: 300px; height: 250px;"></div>

      <div class="js-become-highchart gauge mod-white-border" data-chart-type='small-solid-gauge' data-id='reform-government-legislation-regulations' style="width: 300px; height: 250px;"></div>

    </section>

    <div>

      <ul class='tabList mod-with-separator js-act-as-tab-list'>

        <li class='tabList-item'>
          <button class='tabList-item-button is-selected js-act-as-tab-list-button' data-selects-tab-content-panel-id='government_history_chart'>
            <%= t('.header.government_history') %>
          </button>
        </li>

        <li class='tabList-item'>
          <button class='tabList-item-button js-act-as-tab-list-button' data-selects-tab-content-panel-id='government_methodology'>
            <%= t('.header.methodology') %>
          </button>
        </li>

      </ul>

      <div class="tabContent js-act-as-tab-content">

        <div class='tabContent-panel is-selected js-act-as-tab-content-panel' id='government_history_chart'>
          insert chart here
        </div>

        <div class='tabContent-panel js-act-as-tab-content-panel' id='government_methodology'>
          <% if @methodology_government %>
            <div>
              <%= simple_format_no_tags(@methodology_government.content) %>
            </div>
          <% else %>
            <p>
             <%= t('.no_methodology') %>
            </p>
          <% end %>
        </div>

      </div>
    </div>

  </div>

</div>

<div class='contentSidebarContainer'>

  <div class='contentSidebarContainer-content'>

    <div class='contentSection'>

      <header class='contentSection-header'>

        <h2 class='heading'>
          <%= t('.header.stakeholder_summary') %>
        </h2>

      </header>

      <div class='contentSection-body'>

        <% if @reform_survey.stakeholder_summary %>
          <div>
            <%= simple_format_no_tags(@reform_survey.stakeholder_summary) %>
          </div>
        <% end %>

        <ul>
          <li>
            <%= t('shared.categories.overall') %>:
            <%= @reform_survey.stakeholder_overall_score %> <%= generate_change_icon(@reform_survey.stakeholder_overall_change) %>
          </li>
          <li>
            <%= t('shared.categories.performance') %>:
            <%= @reform_survey.stakeholder_category1_score %> <%= generate_change_icon(@reform_survey.stakeholder_category1_change) %>
          </li>
          <li>
            <%= t('shared.categories.goals') %>:
            <%= @reform_survey.stakeholder_category2_score %> <%= generate_change_icon(@reform_survey.stakeholder_category2_change) %>
          </li>
          <li>
            <%= t('shared.categories.progress') %>:
            <%= @reform_survey.stakeholder_category3_score %> <%= generate_change_icon(@reform_survey.stakeholder_category3_change) %>
          </li>
        </ul>

        <section>

          <ul class='tabList mod-with-separator js-act-as-tab-list'>

            <li class='tabList-item'>
              <button class='tabList-item-button is-selected js-act-as-tab-list-button' data-selects-tab-content-panel-id='stakeholder_history_chart'>
                <%= t('.header.stakeholder_history') %>
              </button>
            </li>

            <li class='tabList-item'>
              <button class='tabList-item-button js-act-as-tab-list-button' data-selects-tab-content-panel-id='stakeholder_methodology'>
                <%= t('.header.methodology') %>
              </button>
            </li>

          </ul>

          <div class="tabContent js-act-as-tab-content">

            <div class='tabContent-panel is-selected js-act-as-tab-content-panel' id='stakeholder_history_chart'>
              insert chart here
            </div>

            <div class='tabContent-panel js-act-as-tab-content-panel' id='stakeholder_methodology'>
              <% if @methodology_stakeholder %>
                <div>
                  <%= simple_format_no_tags(@methodology_stakeholder.content) %>
                </div>
              <% else %>
                <p>
                 <%= t('.no_methodology') %>
                </p>
              <% end %>
            </div>

          </div>

        </section>

      </div>

    </div>

    <% if @external_indicators.present? %>

      <div class='contentSection'>

        <header class='contentSection-header'>

          <h2 class='heading'>
            <%= t('.header.external_indicators') %>
          </h2>

        </header>

        <div class='contentSection-body'>

          <% @external_indicators.each do |ext_ind| %>
            <h3><%= ext_ind.title %></h3>
            <h4><%= ext_ind.subtitle %></h4>
            <div>insert chart here </div>
          <% end %>

        </div>

      </div>

    <% end %>

  </div>

  <% if @news.present? %>
    <div class='contentSidebarContainer-sidebar'>
      <%= render partial: 'shared/news' %>
    </div>
  <% end %>

</div>
